name: Sliver_ARM64_Universal_Success
on: [push]

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout Repo
        uses: actions/checkout@v4

      - name: Build inside Sliver-Builder Container
        run: |
          # استخدام حاوية بناء Sliver الرسمية لحل كافة مشاكل التبعيات والـ Assets
          docker run --rm -v ${{ github.workspace }}:/out bishopfox/sliver-build:latest \
          /bin/bash -c "git clone --depth 1 https://github.com/BishopFox/sliver /sliver && \
          cd /sliver && \
          export GOOS=linux GOARCH=arm64 CGO_ENABLED=0 && \
          make server && \
          cp sliver-server /out/sliver-server-arm64"

      - name: Upload The Real Beast
        uses: actions/upload-artifact@v4
        with:
          name: sliver-real-arm64
          path: sliver-server-arm64
